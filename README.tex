\documentclass[11pt]{article}
\usepackage[dvipsnames]{xcolor}
\definecolor{darkblue}{rgb}{0,0,0.33}
\usepackage{hyperref}
\newcommand{\link}[2]{\underline{\color{darkblue}\href{#1}{#2}}}
\renewcommand{\familydefault}{\sfdefault}
\usepackage{parskip}
\usepackage[margin=1.75cm]{geometry}
\usepackage{courier}
\usepackage{relsize}
\newcommand{\fpversion}{0.1.0.0}


\begin{document}
\title{fountain-parser README\linebreak\linebreak\small{version \fpversion}}
\author{}
\date{}
\maketitle

\section*{Synopsis} \texttt{fountain-parser} is a small parser library
for the \link{https://fountain.io/}{\textsc{Fountain}} screenplay
format, fully supporting 1.1 version
\link{https://fountain.io/syntax/}{syntax} and producing a simple, easy
to grok \textsc{AST}\@.

\texttt{fountain-parser} is written in
\link{https://haskell.org}{\textsc{Haskell}} and it uses the
\link{https://hackage.haskell.org/package/megaparsec}{\textsc{Megaparsec}}
library for parsing.

\section*{Disclaimer}
Currently, this is \emph{pre-alpha} software, not yet usable in
productive form.

This software is distributed \emph{as-is} under the terms of the
\textsc{BSD Three-Clause license}.  See the
\link{run:./LICENSE}{\texttt{LICENSE}} file for more details.

\section*{Motivation}
The
\link{https://fountain.io/developers/}{\emph{Developers} section} of the
Fountain site provides a link to a
\link{https://github.com/nyousefi/Fountain}{parsing library} in
\textsc{Objective~C}\@. This presents a portability issue: while there
\emph{are} projects that make it possible to bridge \textsc{Objective~C}
and \textsc{Haskell}, theyâ€™re platform- or framework-specific.  That
library informs this project in matching the different Fountain entities
even as it uses different parsing methods.

\subsection*{Prospective Related Projects}
\texttt{fountain-parser} aims to power a series of command-line
utilities for conversion from \textsc{Fountain} to a series of
convenient formats (like \texttt{.tex}) without intervention
from thirds.

\subsection*{My software already supports \textsc{Fountain}}
The \link{https://fountain.io/apps/}{\emph{Apps} section} of the
\textsc{Fountain} site lists software that also imports or exports the
format. There's a caveat: most are \emph{cloud-based} and/or
\emph{proprietary}. By favoring (mostly) open formats,
\emph{fountain-parse} allows integration into many \textsc{FLOSS} tools,
enabling entirely non-proprietary workflows and helping the creation of
compound documents such as production bibles.

\section*{Implementation Specifics}
In general, the library parser is rather lenient, allowing liberal
spacing and recognizing \textsc{Unicode} codepoints. Languages without
uppercase/lowercase distinction must resort to \emph{power-user
characters} for case-dependent items such as transitions (`\texttt{>}')
and character names (`\texttt{@}').
  \begin{itemize}
    \item As per the \link{https://fountain.io/syntax/}{syntax guide}:
      \begin{itemize}
        \item This library expects \textsc{Fountain} text to be encoded
          in \textsc{UTF-8}\@.
        \item Tabs are converted into \textbf{four} spaces.
        \item Your line spacing is respected.
        \item Initial spaces are ignored everywhere except in action
          lines.
        \item A line with two spaces doesn't count as an empty line.
      \end{itemize}
    \item All parsing functions expect \texttt{Text} inputs.  File I/O
      is left to the application or framework.
    \item Varying-width \textsc{Unicode} spaces are either converted
      into regular spaces or suppressed if they're hairline- or
      zero-width.
    \item Vertical tabs and form-feed characters are interpreted as line
      changes. For vertical spacing, use multiple blank lines and/or the
      \textsc{Fountain} form feed character sequence (``\texttt{===}'')
      instead.
    \item The parser keeps everything: notes, boneyards, sections and
      synopses. Some possible conversion targets have analogues to
      those, so it might be desirable to preserve them.
  \end{itemize}

  \subsection*{Tentative Grammar}
    The following is an attempt to formalize the syntax in
    \link{https://datatracker.ietf.org/doc/html/rfc5234}{\textsc{ABNF}},
    drawing from the \link{https://fountain.io/syntax/}{syntax guide} and
    \textsc{Objective~C}
    \link{https://github.com/nyousefi/Fountain}{implementation}.

    \input{fountain-grammar}

\section*{Building}
\textsc{GHC}\,9.6.7 and \textsc{Cabal}\,3.0 (or greater) are required to
compile the library and run the tests ({\em not implemented yet.})

The project uses the \texttt{GHC2021} language default. While it might
be possible to compile it in earlier versions than 9.6.7, this default
is only available since 9.2.1, constituting a hard limit.

Some of the included scripts require \texttt{make}, \texttt{sed} and
other similar utilities usually found in \textsc{Linux} or
\textsc{Linux}-like environments (e.g.,
\link{https://www.msys2.org/}{\textsc{Msys2}}\@. For \textsc{Windows}
users, it is recommended to use the
\link{https://www.haskell.org/ghcup/}{\textsc{GHCup}} distribution,\
allow the installer script to deploy \textsc{Msys2} and then install
the development packages.)

\section*{Contact}
Please
\link{https://github.com/CubOfJudahsLion/fountain-parser/issues}{create an issue}
if you find a bug.

I can be reached at
\textrm{\emph{10951848+C\"{u}b\b{O}fJ\'{u}d\~{a}hsL\^{i}\`{o}n} \u{a}(t)
\emph{users/noreply/g\={i}th\d{u}b/c\.{o}m}} (without diacritics and
replacing slashes by periods.)

\end{document}

